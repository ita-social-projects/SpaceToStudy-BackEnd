paths:
  /reviews:
    get:
      security:
        - bearerAuth: [ ]
      tags:
        - Reviews
      summary: Find all reviews
      description: Finds and returns an array with a list of reviews.
      produces:
        - application/json
      parameters:
        - in: query
          name: targetUserRole
          schema:
            type: string
          required: true
        - in: query
          name: rating
          schema:
            type: integer
          required: true
        - in: query
          name: skip
          schema:
            type: integer
          required: false
        - in: query
          name: limit
          schema:
            type: integer
          required: false
        - name: id
          in: path
          required: true
          description: targetUserId field
          type: string
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/definitions/reviewResponse'
              example:
                count: 2
                reviews:
                  - _id: 6255bc080a75adf9223df100
                    comment: Not bad
                    rating: 4
                    author:
                      _id: 6255bc080a75adf9223df100
                      role: [ student, tutor ]
                      firstName: John
                      lastName: Doe
                      email: johndoe@gmail.com
                      categories:
                        [
                          { _id: 6255bc080a75adf9223df444, name: Languages },
                          { _id: 6255bc080a75adf443d7644, name: Biology }
                        ]
                      totalReviews: 10
                      averageRating: 4.5
                      nativeLanguage: english
                      address: { country: The USA, city: California }
                      education: KNPU H.S. Skovoroda
                      photo: john-doe-photo.jpg
                      lastLogin: null
                      createdAt: 2021-04-09T11:34:53.243+00:00
                      updatedAt: 2022-09-02T11:59:53.243+00:00
                    targetUserId: 6255bc080a75adf9223df212
                    targetUserRole: tutor
                    offer:
                      _id: 63ebc6fbd2f34037d0aba791
                      price: 111
                      proficiencyLevel: Beginner
                      description: This is a new course for those who want to start learning English
                      languages: English
                      authorRole: tutor
                      userId: 6255bc080a75adf9223df212
                      subjectId: 63da8767c9ad4c9a0b0eacd3
                      categoryId: 63525e23bf163f5ea609ff2b
                    createdAt: 2022-10-18T13:25:36.292Z
                    updatedAt: 2022-10-18T13:25:36.292Z
                  - _id: 8755bc080a00adr9243df104
                    comment: Best tutor!
                    rating: 5
                    author:
                      _id: 6255bc080a75adf9223df211
                      role: [ student, tutor ]
                      firstName: John
                      lastName: Doe
                      email: johndoe@gmail.com
                      categories:
                        [
                          { _id: 6255bc080a75adf9223df444, name: Languages },
                          { _id: 6255bc080a75adf443d7644, name: Biology }
                        ]
                      totalReviews: 10
                      averageRating: 4.5
                      nativeLanguage: english
                      address: { country: The USA, city: California }
                      education: KNPU H.S. Skovoroda
                      photo: john-doe-photo.jpg
                      lastLogin: null
                      createdAt: 2021-04-09T11:34:53.243+00:00
                      updatedAt: 2022-09-02T11:59:53.243+00:00
                    targetUserId: 6255bc080a75adf9223df212
                    targetUserRole: tutor
                    offer:
                      _id: 63ebc6fbd2f34037d0aba791
                      price: 300
                      proficiencyLevel: Advanced
                      description: Extended English language course
                      languages: English, Ukrainian
                      authorRole: tutor
                      userId: 63e63bb04d1bf3bea00e3d88
                      subjectId: 63da8767c9ad4c9a0b0eacd3
                      categoryId: 63525e23bf163f5ea609ff2b
                    createdAt: 2022-10-18T13:25:36.292Z
                    updatedAt: 2022-10-18T13:25:36.292Z

        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 401
                code: 'UNAUTHORIZED'
                message: 'The requested URL requires user authorization.'
    post:
      security:
        - bearerAuth: [ ]
      tags:
        - Reviews
      summary: Create new review.
      description: Saves a new review the DB.
      produces:
        - application/json
      requestBody:
        required: true
        description: Create new review.
        content:
          application/json:
            schema:
              $ref: '#/definitions/review'
            example:
              _id: 8755bc080a00adr9243df104
              comment: Best tutor!
              rating: 5
              author:
                _id: 6255bc080a75adf9223df211
                role: [ student, tutor ]
                firstName: John
                lastName: Doe
                email: johndoe@gmail.com
                categories:
                  [
                    { _id: 6255bc080a75adf9223df444, name: Languages },
                    { _id: 6255bc080a75adf443d7644, name: Biology }
                  ]
                totalReviews: 10
                averageRating: 4.5
                nativeLanguage: english
                address: { country: The USA, city: California }
                education: KNPU H.S. Skovoroda
                photo: john-doe-photo.jpg
                lastLogin: null
                createdAt: 2021-04-09T11:34:53.243+00:00
                updatedAt: 2022-09-02T11:59:53.243+00:00
              targetUserId: 6255bc080a75adf9223df212
              targetUserRole: tutor
              offer:
                _id: 63ebc6fbd2f34037d0aba791
                price: 300
                proficiencyLevel: Advanced
                description: Extended English language course
                languages: English, Ukrainian
                authorRole: tutor
                userId: 63e63bb04d1bf3bea00e3d88
                subjectId: 63da8767c9ad4c9a0b0eacd3
                categoryId: 63525e23bf163f5ea609ff2b
              createdAt: 2022-10-18T13:25:36.292Z
              updatedAt: 2022-10-18T13:25:36.292Z
      responses:
        201:
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/definitions/reviewResponse'
              example:
                comment: Best tutor!
                rating: 5
                author: 6255bc080a75adf9223df211
                targetUserId: 6255bc080a75adf9223df212
                targetUserRole: tutor
                offer: 6255bc033a75adf9223df231
                createdAt: 2022-10-18T13:25:36.292Z
                updatedAt: 2022-10-18T13:25:36.292Z
        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 400
                code: REVIEW_NOT_CREATED
                message: You are allowed to leave only one review for a tutor.
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 401
                code: UNAUTHORIZED
                message: The requested URL requires user authorization.
        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 403
                code: FORBIDDEN
                message: You do not have permission to perform this action.
  /reviews/{id}:
    get:
      security:
        - bearerAuth: [ ]
      tags:
        - Reviews
      summary: Find review by ID
      description: Finds and returns a reviews with the specified ID.
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the review that needs to be fetched
          type: string
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/definitions/reviewResponse'
              example:
                _id: 6255bc080a75adf9223df100
                comment: Not bad
                rating: 4
                author:
                  _id: 6255bc080a75adf9223df100
                  role: [ student, tutor ]
                  firstName: John
                  lastName: Doe
                  email: johndoe@gmail.com
                  categories:
                    [
                      { _id: 6255bc080a75adf9223df444, name: Languages },
                      { _id: 6255bc080a75adf443d7644, name: Biology }
                    ]
                  totalReviews: 10
                  averageRating: 4.5
                  nativeLanguage: english
                  address: { country: The USA, city: California }
                  education: KNPU H.S. Skovoroda
                  photo: john-doe-photo.jpg
                  lastLogin: null
                  createdAt: 2021-04-09T11:34:53.243+00:00
                  updatedAt: 2022-09-02T11:59:53.243+00:00
                targetUserId: 6255bc080a75adf9223df212
                targetUserRole: tutor
                offer:
                  _id: 63ebc6fbd2f34037d0aba791
                  price: 111
                  proficiencyLevel: Beginner
                  description: This is a new course for those who want to start learning English
                  languages: English
                  authorRole: tutor
                  userId: 6255bc080a75adf9223df212
                  subjectId: 63da8767c9ad4c9a0b0eacd3
                  categoryId: 63525e23bf163f5ea609ff2b
                createdAt: 2022-10-18T13:25:36.292Z
                updatedAt: 2022-10-18T13:25:36.292Z
        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 400
                code: INVALID_ID
                message: ID is invalid.
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 401
                code: UNAUTHORIZED
                message: The requested URL requires user authorization.
        404:
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 404
                code: REVIEW_NOT_FOUND
                message: Review with the specified id was not found.
    patch:
      security:
        - bearerAuth: [ ]
      tags:
        - Reviews
      summary: Update review by ID
      description: Finds and update a review with the specified ID.
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          required: true
          description: Review ID
          type: string
      requestBody:
        required: true
        description: Provide required data to reset a password.
        content:
          application/json:
            schema:
              $ref: '#/definitions/review'
            example:
              comment: Best tutor!
              rating: 5
      responses:
        204:
          description: No Content
        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 400
                code: INVALID_ID
                message: ID is invalid.
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 401
                code: UNAUTHORIZED
                message: The requested URL requires user authorization.
        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 403
                code: FORBIDDEN
                message: You do not have permission to perform this action.
        404:
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 404
                code: REVIEW_NOT_FOUND
                message: Review with the specified id was not found.
    delete:
      security:
        - bearerAuth: [ ]
      tags:
        - Reviews
      summary: Find and delete review by ID
      description: Finds and deletes a review with the specified ID.
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the review that needs to be deleted
          type: string
      responses:
        204:
          description: No Content
        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 400
                code: INVALID_ID
                message: ID is invalid.
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 401
                code: UNAUTHORIZED
                message: The requested URL requires user authorization.
        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 403
                code: FORBIDDEN
                message: You do not have permission to perform this action.
        404:
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 404
                code: REVIEW_NOT_FOUND
                message: Review with the specified id was not found.
